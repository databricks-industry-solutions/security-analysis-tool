{"searchDocs":[{"title":"FAQ","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/faq/","content":"","keywords":"","version":"Next"},{"title":"SAT Deployment and Support‚Äã","type":1,"pageTitle":"FAQ","url":"/security-analysis-tool/docs/faq/#sat-deployment-and-support","content":" Is SAT an officially supported tool? The Security Assessment Tool (SAT) is not officially supported by Databricks. It is provided as-is under the Databricks License, with no guarantees or Service Level Agreements (SLAs). Please do not open support tickets for issues related to SAT. Instead, report any problems or feature requests by creating a GitHub Issue on the project's repository. Issues will be reviewed as time permits. All third-party libraries referenced are subject to their respective licenses.  Can I open Databricks support tickets if I encounter issues with SAT? Currently, SAT is a self-service tool which is developed and maintained by the Databricks field team. If you encounter any issues, please contact your Databricks account team and submit a GitHub issue on the project's repository.  Can SAT be configured on an independent virtual machine? SAT needs to be deployed in one of your Databricks workspaces and run as a workflow. You can trigger the SAT installation process from any machine (preferably Linux) where the Databricks CLI and other prerequisites are available, installed and configured.  Does SAT automatically update once I set up? SAT is frequently updated and the latest versions are made available in the official GitHub repository. SAT deployments do not automatically update on their own. To upgrade or update SAT deployments in your environment, you will need to perform the update manually. This design decision is by choice, so that customers have full control on the upgrade process of SAT.  Can SAT make modifications to my workspaces and account? SAT is meant to be a read-only analysis tool - it does not make changes to your workspace or account configurations.  I am seeing errors when I run the SAT. How can I validate my SAT configuration? There are diagnostic notebooks available to help you verify if your SAT setup has the necessary configurations, permissions, and network paths to run the REST API calls. Please use &quot;Workspace ‚Üí Applications ‚Üí SAT/TF ‚Üí Files ‚Üí Notebooks ‚Üí Diagnosis&quot; to find the appropriate notebook for your cloud provider.  If SAT is already configured, how do we add/remove other workspaces in the same account/subscription? If the service principal configured for SAT has access to any workspaces in the account or subscription, SAT will automatically collect data from those workspaces. To include or exclude workspaces, simply add or remove the service principal from the desired workspaces and rerun the initialization job to update SAT's workspace list.  If a workspace is deleted after the SAT is set up, is there a way to get the initializer to run without error without a full reinstall of the tool? To stop assessing a workspace, you can re-run the initializer. This will mark the workspace connection test as failed, and it will no longer be included in future assessments. Alternatively, you can run the removal step to manually remove the workspace from SAT.  I added a new workspace for analysis, re-ran steps under initialize and driver, but the dashboard is not updated with the new workspace in the pulldown even though I see new data generated by the analysis scan for the new workspace in SAT database. What should I do? It is likely that the dashboard cached the workspaces in the pulldown. You can go to the SQL view of your workspace ‚Üí Queries ‚Üí find workspace_ids query and run it. This process should refresh the cache and you should have the new workspaces in the pull-down.  Can I use one deployment of SAT to monitor all my workspaces across different clouds, like AWS and Azure? A single SAT deployment in AWS can monitor all workspaces within the same AWS account. Similarly, a single SAT deployment in Azure can monitor all workspaces within the same Azure subscription. Monitoring workspaces across multiple cloud platforms with a single SAT deployment is currently not supported.  Do I need different SAT deployment to monitor workspaces in different regions? A single SAT deployment in AWS can monitor all workspaces ‚Äî regardless of region ‚Äî within the same AWS account. Similarly, a single SAT deployment in Azure can monitor all workspaces across any region within the same Azure subscription.  Can SAT be integrated with other cloud based monitoring tools? This is not currently supported. SAT is a security monitoring tool designed specifically for Databricks workspaces. However, you can use the provided export notebook to extract SAT results, which may be used with other tools as needed.  Is SAT supported on AWS GovCloud? SAT is compatible with AWS GovCloud for the Civilian Shard. DoD Shard compatibility will be coming soon.    ","version":"Next","tagName":"h2"},{"title":"SAT Checks‚Äã","type":1,"pageTitle":"FAQ","url":"/security-analysis-tool/docs/faq/#sat-checks","content":" Does SAT test for all of the Databricks Security best practices? We are continuously improving SAT, with most checks aligned to security best practices. However, not all recommendations are included ‚Äî some are cloud-specific, and others cannot be automated due to the lack of supporting REST APIs.  What do the severity labels specifically mean on the SAT configs? How does one interpret them? The severity levels in the SAT report reflect our general assessment of the potential impact of each check, helping most customers prioritize remediation‚Äîstarting with those marked as High severity. However, individual organizations should evaluate the relevance of each finding and adjust prioritization based on their specific security requirements.  Can I disable a check for my assessment? Yes, this is possible. To modify the security best practices checked by SAT, follow the optional step: Navigate to Workspace ‚Üí Applications ‚Üí SAT/TF ‚Üí Files ‚Üí Notebooks ‚Üí Setup ‚Üí 7. update_sat_check_configuration. Use this notebook to enable or disable checks, and adjust evaluation and alert configuration values. You can update this configuration at any time, and all subsequent analyses will reflect your changes.    ","version":"Next","tagName":"h2"},{"title":"SAT Reports‚Äã","type":1,"pageTitle":"FAQ","url":"/security-analysis-tool/docs/faq/#sat-reports","content":" Do we need to address all of the deviations reported by SAT? Please review the SAT report with your business stakeholders, administrators, security team and auditors. Assess your organizational security requirements carefully before making changes based on the report - not all deviations require mitigation. Some recommendations may have cost implications, and some of the security recommendations may have dependency limitations. Always thoroughly review the associated feature documentation before modifying your security configurations.  Why are SSO, SCIM, Table ACLs etc not properly reflected in the SAT report? There are a few checks that rely on self-assessment due to the lack of REST APIs to automatically check them. Please go to &quot;Workspace ‚Üí Applications ‚Üí SAT ‚Üí Files ‚Üí self_assessment_checks.yaml&quot; and ensure the 'enabled' values reflect your environment for the listed manual checks with either true or false. SAT will automatically check the rest of the configurations. Rerun the SAT jobs.   ","version":"Next","tagName":"h2"},{"title":"Functionality","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/functionality/","content":"","keywords":"","version":"Next"},{"title":"Core Features‚Äã","type":1,"pageTitle":"Functionality","url":"/security-analysis-tool/docs/functionality/#core-features","content":" General Dashboard Comprehensive dashboard with detailed security findings across all categories. Provides a centralized view of your Databricks security posture. Executive Dashboard High-level view designed for stakeholders and executives. Consolidates key findings for quick security posture overview. Permissions Analysis Graph-based permissions analysis that reveals who can access what resources across your Databricks environment. Secret Scanning Comprehensive secret detection across notebooks and cluster configurations using TruffleHog with 800+ detector patterns.    ","version":"Next","tagName":"h2"},{"title":"How SAT Works‚Äã","type":1,"pageTitle":"Functionality","url":"/security-analysis-tool/docs/functionality/#how-sat-works","content":" SAT is typically run daily as an automated workflow within your environment:  Data Collection Collects configuration details from Databricks accounts and workspaces via REST APIs. Historical Tracking Persists results in Delta tables within your storage environment for historical tracking and trend analysis. Centralized Reporting Displays results in a centralized Databricks SQL dashboard, categorized into five distinct sections to help stakeholders review relevant workspace settings.    ","version":"Next","tagName":"h2"},{"title":"Security Categories‚Äã","type":1,"pageTitle":"Functionality","url":"/security-analysis-tool/docs/functionality/#security-categories","content":" SAT evaluates over 60 security best practices across five key categories:  Network Security - Network policies, VPC configurations, and network isolationIdentity &amp; Access - User management, group memberships, and access controlsData Protection - Encryption, data classification, and data governanceGovernance - Compliance, audit logging, and policy enforcementInformational - Observations and recommendations for continuous improvement  Severity Levels:  High - Critical issues requiring immediate attentionMedium - Important issues to address soonLow - Minor issues for continuous improvement    ","version":"Next","tagName":"h2"},{"title":"Getting Started‚Äã","type":1,"pageTitle":"Functionality","url":"/security-analysis-tool/docs/functionality/#getting-started","content":" Installation Guides - Set up SAT using standard installation or TerraformUsage Guide - Instructions on running workflows, viewing dashboards, and customizing security checks ","version":"Next","tagName":"h2"},{"title":"Standard Install","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/standard/","content":"Standard Install Unity Catalog Required SAT v0.5.0 and higher requires Unity Catalog. Make sure Unity Catalog is enabled in your Databricks environment before installing SAT. Python Version Requirement If you install SAT locally using install.sh, you must use Python version lower than 3.12. Python 3.12 is not currently supported for local installations. SAT can be set up on any of the cloud platforms where Databricks is hosted. Please follow the setup guide specific to your cloud provider: AWS Setup GuideAzure Setup GuideGCP Setup Guide Note We welcome your feedback and comments ‚Äî please reach out to us at sat@databricks.com or open a GitHub issue. Please review the Project Support section for important information on support and usage terms.","keywords":"","version":"Next"},{"title":"Executive Dashboard","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/functionality/executive-dashboard/","content":"","keywords":"","version":"Next"},{"title":"Overview‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#overview","content":" In addition to the comprehensive SAT dashboard, an Executive Dashboard is also provided. This view consolidates key findings from the complete dashboard and presents them in an easy-to-digest format that's perfect for leadership and business stakeholders.  Databricks One Integration You can use Databricks One to access and share the SAT dashboards across your organization, making it easier to distribute security insights to stakeholders.  ","version":"Next","tagName":"h2"},{"title":"What Leadership Can Do‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#what-leadership-can-do","content":" The Executive Dashboard enables leadership to:  ‚úÖ Quickly understand the overall security health of Databricks deployments‚úÖ Identify critical security issues that require immediate attention‚úÖ Track security improvements over time‚úÖ Make informed decisions about security investments and priorities  This executive-level view complements the detailed technical dashboard, ensuring that both technical teams and business stakeholders have access to the security insights they need.  ","version":"Next","tagName":"h2"},{"title":"Key Metrics‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#key-metrics","content":" The Executive Dashboard focuses on high-level metrics and trends:  ","version":"Next","tagName":"h2"},{"title":"Security Health Score‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#security-health-score","content":" A consolidated view of overall security posture across all workspaces, typically displayed as:  Overall security score or ratingTrend indicators (improving, stable, declining)Comparison across workspaces or time periods  ","version":"Next","tagName":"h3"},{"title":"Critical Issues Summary‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#critical-issues-summary","content":" High-level summary of critical security findings:  Count of high-severity issuesCount of medium-severity issuesCount of low-severity issuesTrend analysis showing improvement or regression  ","version":"Next","tagName":"h3"},{"title":"Workspace Overview‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#workspace-overview","content":" Summary information about monitored workspaces:  Number of workspaces analyzedWorkspace health statusGeographic distributionCloud provider breakdown  ","version":"Next","tagName":"h3"},{"title":"Compliance Status‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#compliance-status","content":" High-level compliance indicators:  Overall compliance scoreKey compliance categories statusAudit readiness indicators  ","version":"Next","tagName":"h3"},{"title":"Benefits for Different Audiences‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#benefits-for-different-audiences","content":" ","version":"Next","tagName":"h2"},{"title":"For Executives‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#for-executives","content":" Time-efficient: Get security insights in minutes, not hoursActionable: Clear priorities and recommendationsTrend-focused: Understand security posture over timeRisk-aware: Identify critical issues requiring attention  ","version":"Next","tagName":"h3"},{"title":"For Security Leadership‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#for-security-leadership","content":" Strategic view: Understand security posture across the organizationResource planning: Identify areas needing investmentCompliance tracking: Monitor compliance status and trendsStakeholder communication: Share security status with business leaders  ","version":"Next","tagName":"h3"},{"title":"For Business Stakeholders‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#for-business-stakeholders","content":" Non-technical: Easy to understand without deep technical knowledgeBusiness-aligned: Focus on business impact and riskTransparent: Clear visibility into security postureConfidence-building: Demonstrate proactive security management  ","version":"Next","tagName":"h3"},{"title":"Dashboard Configuration‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#dashboard-configuration","content":" The Executive Dashboard follows the same configuration process as the General Dashboard:  Click on the dashboard and in the top right, click on the &quot;Share&quot; button.Click on the cogwheel icon and select &quot;Assign new owner&quot;. Choose the new owner of the dashboard.Click on the &quot;Published&quot; icon next to the name of the dashboard, and switch to the &quot;Draft&quot; version. Click on the &quot;Publish&quot; button. Choose from one of the two credential options: Embed credentials (default): All viewers run queries using the owner's credentials and compute.Don't embed credentials: Each viewer must have access to the workspace and associated data to view the dashboard. We recommend using this option for more secure access control. The dashboard can be shared with other team members by clicking the &quot;Share&quot; button from the &quot;Published&quot; mode.  Sharing Configuration Consider creating different sharing groups for executives vs. technical teams. Executives may only need view access, while technical teams may need access to drill down into details.  ","version":"Next","tagName":"h2"},{"title":"When to Use‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#when-to-use","content":" ","version":"Next","tagName":"h2"},{"title":"Regular Reviews‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#regular-reviews","content":" Use the Executive Dashboard for:  Weekly security briefings with leadershipMonthly security reviews with stakeholdersQuarterly business reviews including security postureBoard presentations on security status  ","version":"Next","tagName":"h3"},{"title":"Decision Making‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#decision-making","content":" The Executive Dashboard supports:  Budget planning for security improvementsResource allocation for security initiativesRisk assessment for business decisionsCompliance reporting to auditors and regulators  ","version":"Next","tagName":"h3"},{"title":"Communication‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#communication","content":" Share the Executive Dashboard to:  Demonstrate progress on security initiativesHighlight achievements in security improvementsRaise awareness of security prioritiesBuild confidence in security posture  ","version":"Next","tagName":"h3"},{"title":"Relationship to General Dashboard‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#relationship-to-general-dashboard","content":" The Executive Dashboard and General Dashboard work together:  Executive Dashboard\tGeneral DashboardHigh-level metrics\tDetailed findings Business-focused\tTechnical-focused Strategic view\tOperational view Quick overview\tDeep dive analysis For leadership\tFor technical teams  Dashboard Relationship Both dashboards use the same underlying data, ensuring consistency. The Executive Dashboard provides the &quot;what&quot; and &quot;why,&quot; while the General Dashboard provides the &quot;how&quot; and &quot;where.&quot;  ","version":"Next","tagName":"h2"},{"title":"Best Practices‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#best-practices","content":" Regular Updates Ensure the Executive Dashboard is updated regularly (weekly or bi-weekly) to provide current security insights to leadership.  Customization Consider customizing the Executive Dashboard to highlight metrics most relevant to your organization's security priorities and compliance requirements.  Dashboard Usage Use both dashboards together: Executive Dashboard for high-level status, General Dashboard for detailed remediation.  ","version":"Next","tagName":"h2"},{"title":"Learn More‚Äã","type":1,"pageTitle":"Executive Dashboard","url":"/security-analysis-tool/docs/functionality/executive-dashboard/#learn-more","content":" General Dashboard - Detailed technical dashboardPermissions Analysis - Graph-based access analysisCluster Secrets Scanning - Detect exposed credentialsUsage Guide - Instructions on running SAT workflows and accessing dashboards ","version":"Next","tagName":"h2"},{"title":"GCP Installation","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/standard/gcp/","content":"","keywords":"","version":"Next"},{"title":"Prerequisites‚Äã","type":1,"pageTitle":"GCP Installation","url":"/security-analysis-tool/docs/installation/standard/gcp/#prerequisites","content":" Before you begin, ensure you have:  ‚úÖ Reviewed the general prerequisites‚úÖ Appropriate permissions in your GCP Cloud account‚úÖ A metastore attached to your installation workspace‚úÖ Databricks CLI installed and configured‚úÖ Python version lower than 3.12 (for local installation using install.sh)    ","version":"Next","tagName":"h2"},{"title":"Step 1: Create Service Principal‚Äã","type":1,"pageTitle":"GCP Installation","url":"/security-analysis-tool/docs/installation/standard/gcp/#step-1-create-service-principal","content":" The Service Principal allows SAT to authenticate with your Databricks workspaces and collect security information.  üìã How to create a Service Principal Follow these steps in the Databricks Account Console: Navigate to the GCP Account ConsoleClick on User management in the left sidebarSelect Service Principal ‚Üí Add service principalEnter a name for the service principal (e.g., &quot;SAT-Service-Principal&quot;)Grant the Account Admin roleAssign the Workspace Admin role for each workspace to be monitoredAdd to the Metastore Admin group or roleCreate a new OAuth SecretSave the Secret and Client ID (you'll need these later)Add the Service Principal to each workspace you want to analyze Required Permissions: Account Admin roleWorkspace Admin role for each workspaceMetastore admin group membership    ","version":"Next","tagName":"h2"},{"title":"Step 2: Run Installation‚Äã","type":1,"pageTitle":"GCP Installation","url":"/security-analysis-tool/docs/installation/standard/gcp/#step-2-run-installation","content":" Credentials Required Have these credentials ready before starting: üîë Databricks Account IDüîë Databricks Service Principal ID (Client ID from Step 1)üîë Databricks Service Principal Secret (from Step 1)  ","version":"Next","tagName":"h2"},{"title":"Installation Steps‚Äã","type":1,"pageTitle":"GCP Installation","url":"/security-analysis-tool/docs/installation/standard/gcp/#installation-steps","content":" Run these commands on your workstation or a VM with internet access and Databricks workspace connectivity:  1. Clone the SAT repository:  git clone https://github.com/databricks-industry-solutions/security-analysis-tool.git cd security-analysis-tool   Databricks CLI Required Make sure the target workspace has a profile configured in the Databricks CLI.  2. Make the installation script executable and run it:  chmod +x install.sh ./install.sh   Proxy Support Proxies are supported! You can add your HTTP and HTTPS proxy values during the install.sh script when prompted.  3. Follow the interactive prompts:  The installation script will guide you through the setup process. Here's what it looks like:      ","version":"Next","tagName":"h3"},{"title":"üéâ Next Steps‚Äã","type":1,"pageTitle":"GCP Installation","url":"/security-analysis-tool/docs/installation/standard/gcp/#-next-steps","content":" Congratulations! You've successfully installed SAT on GCP Databricks.  Installation Complete SAT is now ready to analyze your Databricks workspaces. Click here for a detailed guide on how to run and use it.  Permissions Analysis App Setup To set up the Permissions Analysis app and make it execute correctly, refer to the Permissions Analysis Setup section.    ","version":"Next","tagName":"h2"},{"title":"Need Help?‚Äã","type":1,"pageTitle":"GCP Installation","url":"/security-analysis-tool/docs/installation/standard/gcp/#need-help","content":" üîß Troubleshooting Installation Issues If you encounter problems during installation: Common Issues: ‚úì Double-check your credentials are correct‚úì Verify you have the required permissions in your Databricks environment‚úì Ensure the Service Principal has been added to all workspaces‚úì Confirm the metastore is attached to your workspace Resources: Review our FAQ page for common questionsUse the diagnostic notebook to verify your setupCheck the troubleshooting guide for specific errors Still need help? Contact us at sat@databricks.com ","version":"Next","tagName":"h2"},{"title":"Cluster Configuration Secrets Scanning","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/","content":"","keywords":"","version":"Next"},{"title":"Overview‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#overview","content":" Developers sometimes hardcode credentials in cluster environment variables during testing and forget to remove them. These secrets can persist for months, accessible to anyone who can view cluster configurations. SAT's Cluster Configuration Secrets Scanning helps you identify and remediate these security risks.  ","version":"Next","tagName":"h2"},{"title":"What It Does‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#what-it-does","content":" SAT scans spark_env_vars in cluster configurations for hardcoded credentials using TruffleHog with 800+ detector patterns, including:  AWS credentials: Access keys, secret keys, session tokensAzure secrets: Service principal keys, storage account keysGCP credentials: Service account keys, API keysGitHub tokens: Personal access tokens, OAuth tokensAPI keys: Stripe, Slack, SendGrid, and other service API keysDatabase passwords: Connection strings with embedded credentialsPrivate keys: SSH keys, RSA keys, and other cryptographic materialDatabricks-specific tokens: DKEA, DAPI, DOSE tokens  ","version":"Next","tagName":"h2"},{"title":"Why It Matters‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#why-it-matters","content":" Hardcoded credentials in cluster configurations pose significant security risks:  Persistent Exposure: Secrets remain in cluster configs until explicitly removedBroad Access: Anyone with cluster view permissions can see these secretsCompliance Violations: Hardcoded secrets violate security best practices and compliance requirementsAttack Surface: Exposed credentials can be used to access cloud resources, databases, and external services  ","version":"Next","tagName":"h2"},{"title":"How It Works‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#how-it-works","content":" Data Collection: SAT scans all cluster configurations in your workspacesPattern Detection: TruffleHog analyzes spark_env_vars using 800+ detector patternsCorrelation: Results are correlated with notebook scan findings for comprehensive secret exposure analysisReporting: Findings are displayed in the SAT Dashboard and stored in the clusters_secret_scan_results table  ","version":"Next","tagName":"h2"},{"title":"Viewing Results‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#viewing-results","content":" Cluster secret scan results are available in multiple places:  ","version":"Next","tagName":"h2"},{"title":"SAT Dashboard‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#sat-dashboard","content":" The Secret Scanner Dashboard displays cluster secret findings alongside notebook findings, providing a comprehensive view of secret exposure across your environment.    ","version":"Next","tagName":"h3"},{"title":"Database Tables‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#database-tables","content":" Results are stored in the clusters_secret_scan_results table within your SAT schema:  Cluster ID: Identifier of the cluster with exposed secretsCluster Name: Human-readable cluster nameEnvironment Variable: The variable name containing the secretDetector: Type of secret detected (e.g., &quot;AWS Secret Key&quot;)Severity: Risk level (HIGH, MEDIUM, LOW)Workspace: Workspace where the cluster was foundScan Timestamp: When the scan was performed  ","version":"Next","tagName":"h3"},{"title":"Example Finding‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#example-finding","content":" Cluster: dev-team-cluster Environment Variable: AWS_SECRET_ACCESS_KEY Detector: AWS Secret Key Severity: HIGH Recommendation: Move to Databricks Secrets   ","version":"Next","tagName":"h2"},{"title":"Remediation‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#remediation","content":" Remediation Required High-severity findings should be remediated immediately by removing hardcoded secrets and moving them to Databricks Secrets.  ","version":"Next","tagName":"h2"},{"title":"Recommended Approach‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#recommended-approach","content":" Remove Hardcoded Secrets: Delete the secret from the cluster's spark_env_vars configurationUse Databricks Secrets: Store credentials in Databricks Secrets (Databricks-backed or customer-managed)Reference Secrets: Update cluster configuration to reference secrets using {{secrets/scope/key}} syntaxVerify Access: Ensure the cluster has appropriate permissions to access the secret scope  ","version":"Next","tagName":"h3"},{"title":"Example: Migrating to Databricks Secrets‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#example-migrating-to-databricks-secrets","content":" Before (Insecure):  { &quot;spark_env_vars&quot;: { &quot;AWS_SECRET_ACCESS_KEY&quot;: &quot;wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY&quot; } }   After (Secure):  { &quot;spark_env_vars&quot;: { &quot;AWS_SECRET_ACCESS_KEY&quot;: &quot;{{secrets/aws-credentials/secret-key}}&quot; } }   ","version":"Next","tagName":"h3"},{"title":"Configuration‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#configuration","content":" Secret scanning behavior can be configured via the trufflehog_detectors.yaml file located in the configs folder:  days_back: Controls how far back to search for modified clusters Set to 1 to scan clusters modified in the last day (default)Set to 7 to scan clusters modified in the last weekSet to 0 to scan ALL clusters in the workspace (no time filter) page_size: Number of clusters to process per API page (default: 50)custom detectors: Add custom regex patterns to detect organization-specific secret formats  ","version":"Next","tagName":"h2"},{"title":"Firewall Allowlist Requirements‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#firewall-allowlist-requirements","content":" If your environment uses firewalls, you may need to allowlist the following GitHub domains to ensure secret scanning can download TruffleHog and access required resources:  Firewall Configuration If you encounter connection issues during secret scanning, ensure your firewall allows outbound connections to the following domains:  Add the following URLs to your firewall allowlist:  raw.githubusercontent.comgithub.comtoken.actions.githubusercontent.comrelease-assets.githubusercontent.com  ","version":"Next","tagName":"h3"},{"title":"Best Practices‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#best-practices","content":" Regular Scanning Run cluster secret scans regularly (weekly or bi-weekly) to catch newly introduced secrets before they become security risks.  Automated Workflows Consider implementing automated workflows to alert security teams when high-severity secrets are detected in cluster configurations.  Developer Training Educate developers on using Databricks Secrets instead of hardcoding credentials. Include this in onboarding and security training.  False Positives Some patterns may trigger false positives. Review findings carefully and adjust detector patterns if needed.  ","version":"Next","tagName":"h2"},{"title":"Integration with Notebook Scanning‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#integration-with-notebook-scanning","content":" Cluster Configuration Secrets Scanning complements SAT's existing notebook secret scanning:  Comprehensive Coverage: Identifies secrets in both notebooks and cluster configurationsCorrelated Analysis: Correlates findings to identify patterns of secret exposureUnified Reporting: All secret findings are displayed in a single dashboard  ","version":"Next","tagName":"h2"},{"title":"Learn More‚Äã","type":1,"pageTitle":"Cluster Configuration Secrets Scanning","url":"/security-analysis-tool/docs/functionality/cluster-secrets-scanning/#learn-more","content":" Usage Guide - Instructions on running SAT workflows and viewing resultsPermissions Analysis - Understand who can access cluster configurationsGeneral Dashboard - View comprehensive security findings ","version":"Next","tagName":"h2"},{"title":"General Dashboard","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/functionality/general-dashboard/","content":"","keywords":"","version":"Next"},{"title":"Overview‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#overview","content":" The SAT dashboard is organized into intuitive sections, each designed to help you quickly assess your security posture across all workspaces. It displays results from SAT's automated security checks, categorized by severity and security pillar.  Databricks One Integration You can use Databricks One to access and share the SAT dashboards across your organization, making it easier to distribute security insights to stakeholders.  ","version":"Next","tagName":"h2"},{"title":"Dashboard Components‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#dashboard-components","content":" ","version":"Next","tagName":"h2"},{"title":"Workspace Security Summary‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#workspace-security-summary","content":" A high-level overview of security findings, broken down by category and categorized by severity (High, Medium, Low). This provides an at-a-glance view of the overall security health of each workspace.  Displayed Information:  Summary counts per security categoryColor-coded severity indicatorsQuick comparison across workspaces  ","version":"Next","tagName":"h3"},{"title":"Workspace Stats‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#workspace-stats","content":" Displays essential metadata about the analysis run, helping you understand the context of your security findings.  Information included:  ‚è∞ Timestamp of the Analysisüè¢ Workspace Nameüíº Service/Pricing Tierüåç Cloud Region  ","version":"Next","tagName":"h3"},{"title":"Individual Security Category Details‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#individual-security-category-details","content":" Each of the five security pillars includes comprehensive information to help you understand and address security issues.  What each section includes:  Summary counts of deviations from security best practicesDetailed table of security findings, sorted by severityDescription of each issueLinks to relevant documentation for remediation guidance  ","version":"Next","tagName":"h3"},{"title":"Informational Section‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#informational-section","content":" This section highlights observations that are less prescriptive but still valuable for in-depth security reviews.  Purpose:These findings can be reviewed by data and security teams to ensure thresholds and configurations align with organizational policies. Not all informational findings require action, but they provide valuable context for security decision-making.  ","version":"Next","tagName":"h3"},{"title":"Additional Finding Details‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#additional-finding-details","content":" Provides deep-dive information to help pinpoint the root cause of specific findings, including the logic used to detect each issue.  Example: If the finding is &quot;Cluster policy not used&quot;, the dashboard will list the specific cluster workloads where no policy was applied ‚Äî eliminating the guesswork and enabling simplified remediation.  ","version":"Next","tagName":"h3"},{"title":"Security Categories & Severity Levels‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#security-categories--severity-levels","content":" Comprehensive Security Coverage SAT evaluates over 60 security best practices across five key categories, with more being added regularly.  ","version":"Next","tagName":"h2"},{"title":"Security Pillars‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#security-pillars","content":" üõ°Ô∏è Network Security - Network policies, VPC configurations, and network isolationüë• Identity &amp; Access - User management, group memberships, and access controlsüîê Data Protection - Encryption, data classification, and data governance‚öñÔ∏è Governance - Compliance, audit logging, and policy enforcement‚ÑπÔ∏è Informational - Observations and recommendations for continuous improvement  ","version":"Next","tagName":"h3"},{"title":"Severity Levels‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#severity-levels","content":" üî¥ High - Critical issues requiring immediate attentionüü° Medium - Important issues to address soonüü¢ Low - Minor issues for continuous improvement  This structured view helps stakeholders quickly assess risk areas and prioritize remediation efforts across multiple workspaces.  ","version":"Next","tagName":"h3"},{"title":"Detection Examples‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#detection-examples","content":" Let's look at how SAT identifies and presents security findings in practice.  Example The example below shows how SAT highlights security issues with clear visual indicators and actionable remediation guidance.  ","version":"Next","tagName":"h2"},{"title":"Example Finding 1: Deprecated Runtime Versions‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#example-finding-1-deprecated-runtime-versions","content":" üî¥ Deprecated Runtime Versions This check is marked red, indicating that some workloads are using deprecated Databricks runtime versions. While such workloads may continue to run, they will no longer receive support or security patches from Databricks. The Remediation column explains the risk and provides a link to the official documentation listing currently supported runtime versions.    ","version":"Next","tagName":"h3"},{"title":"Example Finding 2: Log Delivery‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#example-finding-2-log-delivery","content":" ‚úÖ Log Delivery This check is marked green, confirming that the workspace configuration aligns with Databricks' security best practices for log delivery.  ","version":"Next","tagName":"h3"},{"title":"Drilling Down into Details‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#drilling-down-into-details","content":" Customers can use the Additional Details section to view specific configuration settings or controls that caused a best practice check to fail.  Example 1: Deprecated Runtime Versions The image below shows additional context for this check, allowing administrators to quickly identify and investigate the affected workloads.    Example 2: Log Delivery (GOV-3) Customers can learn more about the &quot;Log Delivery&quot; check by referencing its identifier, GOV-3.    Continuous Improvement Regularly running SAT checks enables a comprehensive view of your Databricks account and workspace security posture. It also supports continuous improvement by helping you detect and resolve potential security risks early.  ","version":"Next","tagName":"h3"},{"title":"Security Configuration Comparison‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#security-configuration-comparison","content":" Track Your Progress This feature enables side-by-side comparison of two SAT runs across all security dimensions, helping you identify improvements and regressions over time.  This drill-down view helps identify which best practice checks have improved or regressed, allowing security teams to take timely action.  What to look for:  ‚úÖ Improvements Cross marks (‚ùå) turning into check marks (‚úì) reflect better alignment with best practices.  ‚ö†Ô∏è Regressions Check marks (‚úì) turning into cross marks (‚ùå) signal degradation and should be investigated immediately. Alerts are automatically triggered for critical regressions, notifying relevant stakeholders via email.  Example: The diagram below highlights changes in individual checks across categories. The red rectangle illustrates an improvement in the &quot;Enforce User Isolation&quot; check, while also showing a regression in the &quot;Admin Count&quot; best practice.    ","version":"Next","tagName":"h2"},{"title":"Dashboard Configuration‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#dashboard-configuration","content":" The dashboards are, by default, owned by the user profile or Service Principal used during SAT setup.  If you encounter errors when running the dashboard, they are most likely due to permissions issues. To update this behavior:  Click on the dashboard and in the top right, click on the &quot;Share&quot; button.Click on the cogwheel icon and select &quot;Assign new owner&quot;. Choose the new owner of the dashboard. Ownership can also be assigned to someone with access to the SAT catalog/schema and the underlying tables.Click on the &quot;Published&quot; icon next to the name of the dashboard towards the top of the page, and switch to the &quot;Draft&quot; version. Click on the &quot;Publish&quot; button that is next to the &quot;Share&quot; button. Choose from one of the two credential options: Embed credentials (default): All viewers run queries using the owner's credentials and compute. This may expose data to users who wouldn't normally have access. Don't embed credentials: Each viewer must have access to the workspace and associated data to view the dashboard. We recommend using this option for more secure access control. The dashboard can be shared with other team members by clicking the &quot;Share&quot; button from the &quot;Published&quot; mode.  ","version":"Next","tagName":"h2"},{"title":"Key Features‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#key-features","content":" The General Dashboard provides:  üéØ Prioritized Checks - Checks are organized by severity, enabling focus on high-impact security areasüìö Documentation Links - Each check includes links guiding users to the most up-to-date configuration best practicesüîî Alerting Capabilities - Notifications can be triggered on failed critical checks for immediate attentionüîç Detailed Explanations - Comprehensive failure explanations enable admins to pinpoint, isolate, and remediate issues quickly  ","version":"Next","tagName":"h2"},{"title":"Learn More‚Äã","type":1,"pageTitle":"General Dashboard","url":"/security-analysis-tool/docs/functionality/general-dashboard/#learn-more","content":" Executive Dashboard - High-level view for stakeholdersPermissions Analysis - Graph-based access analysisCluster Secrets Scanning - Detect exposed credentialsUsage Guide - Instructions on running SAT workflows ","version":"Next","tagName":"h2"},{"title":"AWS Installation","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/standard/aws/","content":"","keywords":"","version":"Next"},{"title":"Prerequisites‚Äã","type":1,"pageTitle":"AWS Installation","url":"/security-analysis-tool/docs/installation/standard/aws/#prerequisites","content":" Before you begin, ensure you have:  ‚úÖ Reviewed the general prerequisites‚úÖ Appropriate permissions in your Databricks Account Console‚úÖ A metastore attached to your installation workspace‚úÖ Databricks CLI installed and configured‚úÖ Python version lower than 3.12 (for local installation using install.sh)    ","version":"Next","tagName":"h2"},{"title":"Step 1: Create Service Principal‚Äã","type":1,"pageTitle":"AWS Installation","url":"/security-analysis-tool/docs/installation/standard/aws/#step-1-create-service-principal","content":" The Service Principal allows SAT to authenticate with your Databricks workspaces and collect security information.  How to create a Service Principal Follow these steps in the Databricks Account Console: Navigate to the Account ConsoleClick on User management in the left sidebarSelect Service Principal ‚Üí Add service principalEnter a name for the service principal (e.g., &quot;SAT-Service-Principal&quot;)Grant the Account Admin roleAssign the Workspace Admin role for each workspace to be monitoredAdd to the Metastore Admin group or roleCreate a new OAuth SecretSave the Secret and Client ID (you'll need these later)Add the Service Principal to each workspace you want to analyze Required Permissions: Account Admin roleWorkspace Admin role for each workspaceMetastore admin group membership    ","version":"Next","tagName":"h2"},{"title":"Step 2: Run Installation‚Äã","type":1,"pageTitle":"AWS Installation","url":"/security-analysis-tool/docs/installation/standard/aws/#step-2-run-installation","content":" Credentials Required Have these credentials ready before starting: üîë Databricks Account IDüîë Databricks Service Principal ID (Client ID from Step 1)üîë Databricks Service Principal Secret (from Step 1)  ","version":"Next","tagName":"h2"},{"title":"Installation Steps‚Äã","type":1,"pageTitle":"AWS Installation","url":"/security-analysis-tool/docs/installation/standard/aws/#installation-steps","content":" Run these commands on your workstation or a VM with internet access and Databricks workspace connectivity:  1. Clone the SAT repository:  git clone https://github.com/databricks-industry-solutions/security-analysis-tool.git cd security-analysis-tool   Databricks CLI Required Make sure the target workspace has a profile configured in the Databricks CLI.  2. Make the installation script executable and run it:  chmod +x install.sh ./install.sh   Proxy Support Proxies are supported! You can add your HTTP and HTTPS proxy values during the install.sh script when prompted.  3. Follow the interactive prompts:  The installation script will guide you through the setup process. Here's what it looks like:      ","version":"Next","tagName":"h3"},{"title":"Next Steps‚Äã","type":1,"pageTitle":"AWS Installation","url":"/security-analysis-tool/docs/installation/standard/aws/#next-steps","content":" Congratulations! You've successfully installed SAT on AWS Databricks.  Installation Complete SAT is now ready to analyze your Databricks workspaces. Click here for a detailed guide on how to run and use it.  Permissions Analysis App Setup To set up the Permissions Analysis app and make it execute correctly, refer to the Permissions Analysis Setup section.    ","version":"Next","tagName":"h2"},{"title":"Need Help?‚Äã","type":1,"pageTitle":"AWS Installation","url":"/security-analysis-tool/docs/installation/standard/aws/#need-help","content":" Troubleshooting Installation Issues If you encounter problems during installation: Common Issues: ‚úì Double-check your credentials are correct‚úì Verify you have the required permissions in your Databricks environment‚úì Ensure the Service Principal has been added to all workspaces‚úì Confirm the metastore is attached to your workspace Resources: Review our FAQ page for common questionsUse the diagnostic notebook to verify your setupCheck the troubleshooting guide for specific errors Still need help? Contact us at sat@databricks.com ","version":"Next","tagName":"h2"},{"title":"Azure Installation","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/standard/azure/","content":"","keywords":"","version":"Next"},{"title":"Prerequisites‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#prerequisites","content":" Before you begin, ensure you have:  ‚úÖ Reviewed the general prerequisites‚úÖ Appropriate permissions in your Azure cloud account‚úÖ A metastore attached to your installation workspace‚úÖ Databricks CLI installed and configured‚úÖ Python version lower than 3.12 (for local installation using install.sh)    ","version":"Next","tagName":"h2"},{"title":"Step 1: Create Azure App Registration‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#step-1-create-azure-app-registration","content":" The App Registration allows SAT to authenticate with Azure services and Databricks.  How to create an App Registration Follow these steps in the Azure Portal: Open the Azure portal and navigate to Microsoft Entra IDClick on App registrations ‚Üí New registrationEnter a name for the App Registration (e.g., &quot;SAT-App&quot;)Select the appropriate permissions (minimum requirement: single tenant access)Click Register    ","version":"Next","tagName":"h2"},{"title":"Step 2: Create Client Secret‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#step-2-create-client-secret","content":" How to create an App Client Secret After creating the App Registration: Open the App Registration you just createdClick on Certificates &amp; secrets ‚Üí New client secretEnter a description for the client secretSelect an expiry dateClick AddCopy and save the secret value immediately (you won't be able to see it again!)Add the app with &quot;Reader&quot; role to your subscription: Navigate to your subscription's Access control (IAM) sectionClick Add role assignmentSelect the &quot;Reader&quot; roleAssign it to your App Registration    ","version":"Next","tagName":"h2"},{"title":"Step 3: Add Service Principal to Databricks‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#step-3-add-service-principal-to-databricks","content":" Now you'll connect your Azure App Registration to Databricks as a Service Principal.  How to add the Service Principal Follow these steps in Databricks Account Console: Navigate to the Databricks Account ConsoleClick on User management in the left sidebarSelect Service Principal ‚Üí Add service principalPaste the App Client ID (Application ID from Azure)Create a name for the service principalClick AddGrant the Account Admin roleAssign the Workspace Admin role for each workspace to be monitoredAdd to the Metastore Admin group or role Required Permissions: Account Admin roleWorkspace Admin role for each workspaceMetastore admin group membership üìö Learn more about Service Principals    ","version":"Next","tagName":"h2"},{"title":"Step 4: Run Installation‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#step-4-run-installation","content":" Credentials Required Have these credentials ready before starting: üîë Databricks Account IDüîë Azure Tenant IDüîë Azure Subscription IDüîë Azure App Client ID (from Step 1)üîë Azure App Client Secret (from Step 2)  ","version":"Next","tagName":"h2"},{"title":"Installation Steps‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#installation-steps","content":" Run these commands on your workstation or a VM with internet access and Databricks workspace connectivity:  1. Clone the SAT repository:  git clone https://github.com/databricks-industry-solutions/security-analysis-tool.git cd security-analysis-tool   Databricks CLI Required Make sure the target workspace has a profile configured in the Databricks CLI.  2. Make the installation script executable and run it:  chmod +x install.sh ./install.sh   Proxy Support Proxies are supported! You can add your HTTP and HTTPS proxy values during the install.sh script when prompted.  3. Follow the interactive prompts:  The installation script will guide you through the setup process. Here's what it looks like:      ","version":"Next","tagName":"h3"},{"title":"Next Steps‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#next-steps","content":" Congratulations! You've successfully installed SAT on Azure Databricks.  Installation Complete SAT is now ready to analyze your Databricks workspaces. Click here for a detailed guide on how to run and use it.  Permissions Analysis App Setup To set up the Permissions Analysis app and make it execute correctly, refer to the Permissions Analysis Setup section.    ","version":"Next","tagName":"h2"},{"title":"Need Help?‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#need-help","content":" Troubleshooting Installation Issues If you encounter problems during installation: Common Issues: ‚úì Double-check your credentials are correct‚úì Verify you have the required permissions in your Azure and Databricks environments‚úì Ensure the Service Principal has been added to all workspaces‚úì Confirm the metastore is attached to your workspace‚úì Verify the App Registration has the &quot;Reader&quot; role on your subscription Resources: Review our FAQ page for common questionsUse the diagnostic notebook to verify your setupCheck the troubleshooting guide for specific errors Still need help? Contact us at sat@databricks.com    ","version":"Next","tagName":"h2"},{"title":"References‚Äã","type":1,"pageTitle":"Azure Installation","url":"/security-analysis-tool/docs/installation/standard/azure/#references","content":" Azure App RegistrationDatabricks Service Principals on Azure ","version":"Next","tagName":"h2"},{"title":"AWS","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/terraform/aws/","content":"","keywords":"","version":"Next"},{"title":"Setting Up Terraform‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#setting-up-terraform","content":" Unity Catalog Required SAT v0.5.0 and higher requires Unity Catalog. Make sure Unity Catalog is enabled in your Databricks environment before installing SAT.  ","version":"Next","tagName":"h2"},{"title":"Step 1: Install Required Tools‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#step-1-install-required-tools","content":" Install Terraform.Install Git on your local machine.  ","version":"Next","tagName":"h3"},{"title":"Step 2: Clone the Repository‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#step-2-clone-the-repository","content":" Clone the Security Analysis Tool repository using:  git clone https://github.com/databricks-industry-solutions/security-analysis-tool.git   ","version":"Next","tagName":"h3"},{"title":"Step 3: Navigate to the Terraform Directory‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#step-3-navigate-to-the-terraform-directory","content":" Navigate to the relevant cloud directory:  cd security-analysis-tool/terraform/&lt;cloud&gt;/   ","version":"Next","tagName":"h3"},{"title":"Step 4: Configure Variables‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#step-4-configure-variables","content":" Create a terraform.tfvars file using the template.tfvars file as a base.Refer to the variables.tf for descriptions of the variables.Set all required variables for your deployment.  Further Documentation for some of the variables:  workspace_id account_console_id  Proxies are now supported as part of SAT. You can add your HTTP and HTTPS links to use your proxies.  { &quot;http&quot;: &quot;http://example.com&quot;, &quot;https&quot;: &quot;https://example.com&quot; }   ","version":"Next","tagName":"h3"},{"title":"Run Terraform and SAT Workflows‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#run-terraform-and-sat-workflows","content":" ","version":"Next","tagName":"h2"},{"title":"Step 5: Run Terraform Commands‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#step-5-run-terraform-commands","content":" Initialize Terraform:  terraform init   Plan Terraform Changes - create a plan to preview changes to your infrastructure:  terraform plan   Apply Terraform Plan - Execute the proposed changes:  terraform apply   ","version":"Next","tagName":"h3"},{"title":"Step 6: Run Databricks Jobs‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#step-6-run-databricks-jobs","content":" Run &quot;SAT Initializer Notebook&quot;:  This must be run successfully once. While it can be run multiple times, a single successful run is sufficient.  Run &quot;SAT Driver Notebook&quot;:  This notebook can be scheduled to run periodically (e.g., every Monday, Wednesday, and Friday).  Run &quot;SAT Secrets Scanner Notebook&quot; (Optional):  This notebook scans workspace notebooks for exposed secrets using TruffleHog. Can be run on-demand or scheduled based on security requirements.  ","version":"Next","tagName":"h3"},{"title":"Step 7: Access the SAT Dashboard‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#step-7-access-the-sat-dashboard","content":" Navigate to the SQL &gt; Dashboard in the left menu from the Databricks workspace.Select the SAT Dashboard, choose a Workspace from the dropdown, and refresh the dashboard.  ","version":"Next","tagName":"h3"},{"title":"Supplemental Documentation‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#supplemental-documentation","content":" Databricks Documentation TerraformDatabricks Terraform Provider Docs  ","version":"Next","tagName":"h3"},{"title":"Additional Considerations:‚Äã","type":1,"pageTitle":"AWS","url":"/security-analysis-tool/docs/installation/terraform/aws/#additional-considerations","content":" If a pre-existing secret scope named sat_scope causes jobs to fail:  Rename the secret scope in secrets.tfRe-run terraform apply.Update the secret scope name in 6 locations (CMD 4 and CMD 5) of Workspace -&gt; Applications -&gt; SAT-TF/notebooks/Utils/initialize.Re-run failed jobs  Permissions Analysis App Setup To set up the Permissions Analysis app and make it execute correctly, refer to the Permissions Analysis Setup section.  Congratulations! üéâ You are now ready to start using the SAT. Please click here for a detailed description on how to run and use it. ","version":"Next","tagName":"h3"},{"title":"Terraform Install","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/terraform/","content":"","keywords":"","version":"Next"},{"title":"Permissions Analysis Setup‚Äã","type":1,"pageTitle":"Terraform Install","url":"/security-analysis-tool/docs/installation/terraform/#permissions-analysis-setup","content":" After installing SAT, you will need to manually complete the Permissions Analysis app deployment and configuration by following these steps:  ","version":"Next","tagName":"h2"},{"title":"1. Deploy the app using the Databricks CLI‚Äã","type":1,"pageTitle":"Terraform Install","url":"/security-analysis-tool/docs/installation/terraform/#1-deploy-the-app-using-the-databricks-cli","content":" Deploy the app using the appropriate command based on your installation method:  For DABs installations:  databricks apps deploy sat-permissions-exp --source-code-path /Workspace/Applications/SAT/files/app/brickhound   For Terraform installations:  databricks apps deploy sat-permissions-exp --source-code-path /Workspace/Repos/Applications/SAT_TF/app/brickhound databricks app deploy   Note The app compute may take a few minutes to start. Please make sure that Compute &gt; Apps &gt; sat-permissions-exp is &quot;running&quot; in your workspace before proceeding to the next step.  ","version":"Next","tagName":"h3"},{"title":"2. Configure app resources‚Äã","type":1,"pageTitle":"Terraform Install","url":"/security-analysis-tool/docs/installation/terraform/#2-configure-app-resources","content":" Edit the app configuration in the Databricks UI and assign the following resources:  Resource Type\tResource Key\tSecret Scope\tSecret Key\tValueSQL warehouse\tsql-warehouse\t‚Äî\t‚Äî\t‚Äî Secret\t‚Äî\tsat_scope\tsql-warehouse-id\tsql-warehouse-id Secret\t‚Äî\tsat_scope\tanalysis_schema_name\tanalysis_schema_name  ","version":"Next","tagName":"h3"},{"title":"3. Grant Unity Catalog permissions‚Äã","type":1,"pageTitle":"Terraform Install","url":"/security-analysis-tool/docs/installation/terraform/#3-grant-unity-catalog-permissions","content":" After running the jobs and before the first use of the app, you need to grant Unity Catalog permissions to the app's service principal.  Copy the App authorization service principal (not the name, the actual service principal ID)Run the following SQL commands to grant the necessary permissions:  -- Grant USE CATALOG permission GRANT USE CATALOG ON CATALOG &lt;your SAT UC catalog&gt; TO `&lt;app authorization service principal&gt;`; -- Grant USE SCHEMA permission GRANT USE SCHEMA ON SCHEMA &lt;your SAT UC catalog&gt;.&lt;SAT Schema&gt; TO `&lt;app authorization service principal&gt;`; -- Grant SELECT on all tables in the schema GRANT SELECT ON SCHEMA &lt;your SAT UC catalog&gt;.&lt;SAT Schema&gt; TO `&lt;app authorization service principal&gt;`;   Tip Replace &lt;your SAT UC catalog&gt;, &lt;SAT Schema&gt;, and &lt;app authorization service principal&gt; with your actual values. ","version":"Next","tagName":"h3"},{"title":"Installation","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/","content":"","keywords":"","version":"Next"},{"title":"Prerequisites‚Äã","type":1,"pageTitle":"Installation","url":"/security-analysis-tool/docs/installation/#prerequisites","content":" Note SAT is especially beneficial to customers on Databricks Premium or Enterprise tiers, as most of the checks and recommendations involve security features that are only available in tiers above Standard.  Before proceeding with the installation, make sure you have the following prerequisites:  Python 3.9 or higherDatabricks CLI installed with a profile logged (See here.)Databricks Account IDDatabricks SQL Warehouse (To run the SQL dashboard)PyPI access from your workspace (To install the SAT utility library)  SAT can be set up on any of the cloud platforms where Databricks is hosted. Please follow the setup guide specific to your cloud provider:  AWS Setup GuideAzure Setup GuideGCP Setup Guide  Terraform Install SAT can be deployed using Terraform. If your organization uses Terraform, it is recommended to follow the Terraform-based deployment instructions: SAT AWS Terraform deploymentSAT Azure Terraform deploymentSAT GCP Terraform deployment  ","version":"Next","tagName":"h2"},{"title":"Uninstalling SAT‚Äã","type":1,"pageTitle":"Installation","url":"/security-analysis-tool/docs/installation/#uninstalling-sat","content":" Note SAT creates a new security_analysis schema along with Delta tables. If you are an existing SAT user please run the following command: Hive Metastore Based Schema‚Äã drop database security_analysis cascade; Unity Catalog Based Schema‚Äã drop database &lt;uc_catalog_name&gt;.&lt;schema_name&gt; cascade;   ","version":"Next","tagName":"h2"},{"title":"Standard Setup‚Äã","type":1,"pageTitle":"Installation","url":"/security-analysis-tool/docs/installation/#standard-setup","content":" Delete the /Workspace/Applications/SAT folderDelete the following workflows: SAT Initializer NotebookSAT Driver Notebook Delete the SAT Dashboards  ","version":"Next","tagName":"h3"},{"title":"Terraform Setup‚Äã","type":1,"pageTitle":"Installation","url":"/security-analysis-tool/docs/installation/#terraform-setup","content":" Run the terraform destroy command ","version":"Next","tagName":"h3"},{"title":"Permissions Analysis","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/functionality/permissions-analysis/","content":"","keywords":"","version":"Next"},{"title":"What Permissions Analysis does‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#what-permissions-analysis-does","content":" Permissions Analysis transforms the Databricks permissions into a queryable graph database, enabling you to:  Query Access Patterns: Find all resources a user/group/service principal can access‚Äîincluding indirect access via group membership and parent resource inheritanceReverse Lookup Security: Discover all principals (users, groups, service principals) that have access to a specific resourceDetect Escalation Paths: Identify privilege escalation risks by finding paths from any principal to admin roles (Account Admin, Metastore Admin, Workspace Admin, Catalog Owner)Analyze Impersonation Risk: Discover lateral movement opportunities where users can modify jobs or clusters that run as elevated service principalsGenerate Compliance Reports: Produce audit-ready reports showing over-privileged users, orphaned resources, and high-risk principals  ","version":"Next","tagName":"h2"},{"title":"Common Use Cases‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#common-use-cases","content":" Access Audit - Identify all principals with access to a specific resource Challenge: Manual verification takes 45+ minutes and may miss nested group memberships. Solution: Permissions Analysis provides instant reverse lookup showing all principals with access to a specific resource, including indirect access paths through group memberships and inheritance.  Privilege Escalation Assessment - Determine if a principal can reach admin roles Challenge: Manual verification requires traversing dozens of relationships to identify potential escalation paths. Solution: Permissions Analysis maps the entire attack surface, identifying all paths from any principal to admin roles (Account Admin, Metastore Admin, Workspace Admin, Catalog Owner), not just the obvious paths.  Blast Radius Assessment - Assess impact if a service principal is compromised Challenge: Determining accessible resources and running jobs requires extensive investigation before revoking credentials. Solution: Permissions Analysis queries the graph to show all resources accessible by a principal, including tables, models, clusters, warehouses, and jobs that run under the compromised identity.  Orphaned Resource Identification - Find resources without clear ownership Challenge: Identifying current responsibility for resources created by departed users is complex, especially when resources still run in production. Solution: Permissions Analysis generates compliance reports identifying orphaned resources and their current access patterns, helping determine who has implicit admin rights through ownership.  ","version":"Next","tagName":"h2"},{"title":"Getting Started‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#getting-started","content":" ","version":"Next","tagName":"h2"},{"title":"Step 1: Run Data Collection‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#step-1-run-data-collection","content":" SAT automatically creates a &quot;SAT Permissions Analysis - Data Collection&quot; job when you consent to ‚ÄúDeploy Permissions Analysis‚Äù during your SAT installation and runs automatically on a schedule.To run it manually:  Navigate to Jobs &amp; PipelinesLocate &quot;SAT Permissions Analysis - Data Collection&quot;Select &quot;Run Now&quot;Allow 10-30 minutes for completion (varies by account size)  The collection job queries Databricks APIs to build a complete graph of your environment's identities, resources, and permission relationships.  ","version":"Next","tagName":"h3"},{"title":"Step 2: Analyze Permissions - notebooks‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#step-2-analyze-permissions---notebooks","content":" Once data collection completes, use the pre-built interactive notebooks in /notebooks/brickhound/:  Notebook\tPurpose\tSample Query01_principal_resource_analysis.py\tQuery access patterns\t&quot;What tables can john.doe@company.com access?&quot; &quot;Who can access XYZ resource&quot; 02_escalation_paths.py\tFind privilege escalation paths\t&quot;Can this contractor reach Account Admin?&quot; 03_impersonation_analysis.py\tAnalyze impersonation risks\t&quot;Who can run jobs as elevated service principals?&quot; 04_advanced_reports.py\tGenerate compliance reports\t&quot;List all users with access to 50+ resources&quot;  ","version":"Next","tagName":"h3"},{"title":"Step 3: Web UI (Recommended)‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#step-3-web-ui-recommended","content":" For a user-friendly interface, deploy the Permissions Analysis Databricks App:  Access at: https://&lt;workspace-url&gt;/apps/sat-permissions-exp  The web UI provides:  Interactive search for principals and resourcesEscalation paths visualizationImpersonation analysis reportsSecurity reports including: Secret scope accessHigh privilege principalsOver-privileged usersOrphaned resources    ","version":"Next","tagName":"h3"},{"title":"Key Capabilities‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#key-capabilities","content":" ","version":"Next","tagName":"h2"},{"title":"Query Access Patterns‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#query-access-patterns","content":" Find all resources accessible by a specific principal, including:  Direct permissionsGroup memberships (including nested groups)Inherited permissions from parent resourcesService principal impersonation  Example Query: Determine what resources the principal john.doe@company.com can access.  ","version":"Next","tagName":"h3"},{"title":"Reverse Lookup Security‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#reverse-lookup-security","content":" Discover all principals with access to a specific resource:  Users with direct accessGroups with access (and their members)Service principals with accessInherited access paths  Example Query: Identify all principals that can access the production.finance.revenue table.    ","version":"Next","tagName":"h3"},{"title":"Detect Escalation Paths‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#detect-escalation-paths","content":" Identify privilege escalation risks by finding paths to:  Account AdminMetastore AdminWorkspace AdminCatalog Owner  Example Query: Determine whether the principal contractor@external.com can reach Account Admin privileges.  ","version":"Next","tagName":"h3"},{"title":"Analyze Impersonation Risk‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#analyze-impersonation-risk","content":" Discover lateral movement opportunities:  Users who can modify jobs that run as service principalsService principals with elevated privilegesClusters configured to run as specific service principals  Example Query: Identify principals that can run jobs as elevated service principals.  ","version":"Next","tagName":"h3"},{"title":"Generate Compliance Reports‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#generate-compliance-reports","content":" Produce audit-ready reports showing:  Over-privileged users (access to 50+ resources)Orphaned resources (created by departed users)High-risk principals (multiple escalation paths)Secret scope access patterns  ","version":"Next","tagName":"h3"},{"title":"Best Practices‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#best-practices","content":" Regular Data Collection: Run the data collection job regularly (weekly or bi-weekly) to maintain an up-to-date permissions graph as your environment changes.Web UI for Ad-Hoc Queries: Use the web UI for ad-hoc queries and quick access audits. Use the notebooks for automated reporting and compliance checks.Point-in-Time Data: Permissions data represents a point-in-time snapshot. For critical access reviews, ensure data collection has run recently.  ","version":"Next","tagName":"h2"},{"title":"Learn More‚Äã","type":1,"pageTitle":"Permissions Analysis","url":"/security-analysis-tool/docs/functionality/permissions-analysis/#learn-more","content":" Usage Guide - Instructions on running SAT workflowsInstallation Guide - Set up SAT and Permissions AnalysisGitHub Issues - Report issues or request features ","version":"Next","tagName":"h2"},{"title":"GCP","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/terraform/gcp/","content":"","keywords":"","version":"Next"},{"title":"Setting Up Terraform‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#setting-up-terraform","content":" Unity Catalog Required SAT v0.5.0 and higher requires Unity Catalog. Make sure Unity Catalog is enabled in your Databricks environment before installing SAT.  ","version":"Next","tagName":"h2"},{"title":"Step 1: Install Required Tools‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#step-1-install-required-tools","content":" Install Terraform.Install Git on your local machine.  ","version":"Next","tagName":"h3"},{"title":"Step 2: Clone the Repository‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#step-2-clone-the-repository","content":" Clone the Security Analysis Tool repository using:  git clone https://github.com/databricks-industry-solutions/security-analysis-tool.git   ","version":"Next","tagName":"h3"},{"title":"Step 3: Navigate to the Terraform Directory‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#step-3-navigate-to-the-terraform-directory","content":" Navigate to the relevant cloud directory:  cd security-analysis-tool/terraform/&lt;cloud&gt;/   ","version":"Next","tagName":"h3"},{"title":"Step 4: Configure Variables‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#step-4-configure-variables","content":" Create a terraform.tfvars file using the template.tfvars file as a base.Refer to the variables.tf for descriptions of the variables.Set all required variables for your deployment.  Further Documentation for some of the variables:  workspace_id  account_console_id  Proxies are now supported as part of SAT. You can add your HTTP and HTTPS links to use your proxies.  { &quot;http&quot;: &quot;http://example.com&quot;, &quot;https&quot;: &quot;https://example.com&quot; }   ","version":"Next","tagName":"h3"},{"title":"Run Terraform and SAT Workflows‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#run-terraform-and-sat-workflows","content":" ","version":"Next","tagName":"h2"},{"title":"Step 5: Run Terraform Commands‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#step-5-run-terraform-commands","content":" Initialize Terraform:  terraform init   Plan Terraform Changes - create a plan to preview changes to your infrastructure:  terraform plan   Apply Terraform Plan - Execute the proposed changes:  terraform apply   ","version":"Next","tagName":"h3"},{"title":"Step 6: Run Databricks Jobs‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#step-6-run-databricks-jobs","content":" Run &quot;SAT Initializer Notebook&quot;:  This must be run successfully once. While it can be run multiple times, a single successful run is sufficient.  Run &quot;SAT Driver Notebook&quot;:  This notebook can be scheduled to run periodically (e.g., every Monday, Wednesday, and Friday).  Run &quot;SAT Secrets Scanner Notebook&quot; (Optional):  This notebook scans workspace notebooks for exposed secrets using TruffleHog. Can be run on-demand or scheduled based on security requirements.  ","version":"Next","tagName":"h3"},{"title":"Step 7: Access the SAT Dashboard‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#step-7-access-the-sat-dashboard","content":" Navigate to the SQL &gt; Dashboard in the left menu from the Databricks workspace.Select the SAT Dashboard, choose a Workspace from the dropdown, and refresh the dashboard.  ","version":"Next","tagName":"h3"},{"title":"Supplemental Documentation‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#supplemental-documentation","content":" Databricks Documentation TerraformDatabricks Terraform Provider Docs  ","version":"Next","tagName":"h3"},{"title":"Additional Considerations:‚Äã","type":1,"pageTitle":"GCP","url":"/security-analysis-tool/docs/installation/terraform/gcp/#additional-considerations","content":" If a pre-existing secret scope named sat_scope causes jobs to fail:  Rename the secret scope in secrets.tfRe-run terraform apply.Update the secret scope name in 6 locations (CMD 4 and CMD 5) of Workspace -&gt; Applications -&gt; SAT-TF/notebooks/Utils/initialize.Re-run failed jobs  Permissions Analysis App Setup To set up the Permissions Analysis app and make it execute correctly, refer to the Permissions Analysis Setup section.  Congratulations! üéâ You are now ready to start using the SAT. Please click here for a detailed description on how to run and use it. ","version":"Next","tagName":"h3"},{"title":"Azure","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/installation/terraform/azure/","content":"","keywords":"","version":"Next"},{"title":"Setting Up Terraform‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#setting-up-terraform","content":" Unity Catalog Required SAT v0.5.0 and higher requires Unity Catalog. Make sure Unity Catalog is enabled in your Databricks environment before installing SAT.  Note SAT requires at least one SAT set up in a workspace per Azure subscription.  ","version":"Next","tagName":"h2"},{"title":"Step 1: Install Required Tools‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#step-1-install-required-tools","content":" Install Terraform.Install Git on your local machine.  ","version":"Next","tagName":"h3"},{"title":"Step 2: Clone the Repository‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#step-2-clone-the-repository","content":" Clone the Security Analysis Tool repository using:  git clone https://github.com/databricks-industry-solutions/security-analysis-tool.git   ","version":"Next","tagName":"h3"},{"title":"Step 3: Navigate to the Terraform Directory‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#step-3-navigate-to-the-terraform-directory","content":" Navigate to the relevant cloud directory:  cd security-analysis-tool/terraform/&lt;cloud&gt;/   ","version":"Next","tagName":"h3"},{"title":"Step 4: Configure Variables‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#step-4-configure-variables","content":" Create a terraform.tfvars file using the template.tfvars file as a base.Refer to the variables.tf for descriptions of the variables.Set all required variables for your deployment.  Azure-Specific Configuration‚Äã  Follow the Azure Setup Guide for variable setup.  Service Principal Role Requirements:‚Äã  &quot;Reader&quot; role at the subscription level via Access control (IAM).Accounts Admin roleAdmin role for each workspaceMember of the metastore admin group  Refer to the documentation for workspace_url, workspace_id, and account_console_id  ","version":"Next","tagName":"h3"},{"title":"Step 5: Configure Azure CLI Credentials‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#step-5-configure-azure-cli-credentials","content":" Set up Azure CLI credentials for the provider block in provider.tf.Use the Azure CLI to log in. The CLI will open a web browser for authentication:  az login   Proxies are now supported as part of SAT. You can add your HTTP and HTTPS links to use your proxies.  { &quot;http&quot;: &quot;http://example.com&quot;, &quot;https&quot;: &quot;https://example.com&quot; }   ","version":"Next","tagName":"h3"},{"title":"Run Terraform and SAT Workflows‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#run-terraform-and-sat-workflows","content":" ","version":"Next","tagName":"h2"},{"title":"Step 6: Run Terraform Commands‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#step-6-run-terraform-commands","content":" Initialize Terraform:  terraform init   Plan Terraform Changes - create a plan to preview changes to your infrastructure:  terraform plan   Apply Terraform Plan - Execute the proposed changes:  terraform apply   ","version":"Next","tagName":"h3"},{"title":"Step 7: Run Databricks Jobs‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#step-7-run-databricks-jobs","content":" Run &quot;SAT Initializer Notebook&quot;:  This must be run successfully once. While it can be run multiple times, a single successful run is sufficient.  Run &quot;SAT Driver Notebook&quot;:  This notebook can be scheduled to run periodically (e.g., every Monday, Wednesday, and Friday).  Run &quot;SAT Secrets Scanner Notebook&quot; (Optional):  This notebook scans workspace notebooks for exposed secrets using TruffleHog. Can be run on-demand or scheduled based on security requirements.  ","version":"Next","tagName":"h3"},{"title":"Step 8: Access the SAT Dashboard‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#step-8-access-the-sat-dashboard","content":" Navigate to the SQL &gt; Dashboard in the left menu from the Databricks workspace.Select the SAT Dashboard, choose a Workspace from the dropdown, and refresh the dashboard.  ","version":"Next","tagName":"h3"},{"title":"Supplemental Documentation‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#supplemental-documentation","content":" Databricks Documentation TerraformDatabricks Terraform Provider Docs  ","version":"Next","tagName":"h3"},{"title":"Additional Considerations:‚Äã","type":1,"pageTitle":"Azure","url":"/security-analysis-tool/docs/installation/terraform/azure/#additional-considerations","content":" If a pre-existing secret scope named sat_scope causes jobs to fail:  Rename the secret scope in secrets.tfRe-run terraform apply.Update the secret scope name in 6 locations (CMD 4 and CMD 5) of Workspace -&gt; Applications -&gt; SAT-TF/notebooks/Utils/initialize.Re-run failed jobs  Permissions Analysis App Setup To set up the Permissions Analysis app and make it execute correctly, refer to the Permissions Analysis Setup section.  Congratulations! üéâ You are now ready to start using the SAT. Please click here for a detailed description on how to run and use it. ","version":"Next","tagName":"h3"},{"title":"Troubleshooting","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/troubleshooting/","content":"","keywords":"","version":"Next"},{"title":"Diagnostic Notebooks‚Äã","type":1,"pageTitle":"Troubleshooting","url":"/security-analysis-tool/docs/troubleshooting/#diagnostic-notebooks","content":" Quick Diagnosis Diagnosis notebooks for each cloud platform are available to help troubleshoot your SAT setup. To run the appropriate diagnostic notebook: Navigate to Workspace ‚Üí Applications ‚Üí SAT ‚Üí files ‚Üí notebooks ‚Üí diagnosis folderOpen and run the notebook corresponding to your cloud provider Available diagnostic notebooks: SAT AWS troubleshooting notebookSAT Azure troubleshooting notebookSAT GCP troubleshooting notebook    ","version":"Next","tagName":"h2"},{"title":"Common Issues‚Äã","type":1,"pageTitle":"Troubleshooting","url":"/security-analysis-tool/docs/troubleshooting/#common-issues","content":" Misconfigured Secrets - Secret does not exist with scope Error: Secret does not exist with scope: sat_scope and key: sat_tokens Resolution: Check if the tokens are configured with the correct names by listing and comparing with the configuration. databricks --profile e2-sat secrets list-secrets sat_scope   Firewall Blocking Databricks Accounts Console - Connection Reset Error Error: Traceback (most recent call last): File &quot;/databricks/python/lib/python3.8/site-packages/urllib3/connectionpool.py&quot;, line 670, in urlopen httplib_response = self._make_request( File &quot;/databricks/python/lib/python3.8/site-packages/urllib3/connectionpool.py&quot;, line 381, in _make_request self._validate_conn(conn) File &quot;/databricks/python/lib/python3.8/site-packages/urllib3/connectionpool.py&quot;, line 978, in _validate_conn conn.connect() File &quot;/databricks/python/lib/python3.8/site-packages/urllib3/connection.py&quot;, line 362, in connect self.sock = ssl_wrap_socket( File &quot;/databricks/python/lib/python3.8/site-packages/urllib3/util/ssl_.py&quot;, line 386, in ssl_wrap_socket return context.wrap_socket(sock, server_hostname=server_hostname) File &quot;/usr/lib/python3.8/ssl.py&quot;, line 500, in wrap_socket return self.sslsocket_class._create( File &quot;/usr/lib/python3.8/ssl.py&quot;, line 1040, in _create self.do_handshake() File &quot;/usr/lib/python3.8/ssl.py&quot;, line 1309, in do_handshake self._sslobj.do_handshake() ConnectionResetError: [Errno 104] Connection reset by peer During handling of the above exception, another exception occurred: Resolution: Run the following command in your notebook to test connectivity: %sh curl -X GET -H &quot;Authorization: Basic /&lt;base64 of userid:password/&gt;&quot; -H &quot;Content-Type: application/json&quot; https://accounts.cloud.databricks.com/api/2.0/accounts/&lt;account_id&gt;/workspaces or %sh curl -u 'user:password' -X GET &quot;Content-Type: application/json&quot; https://accounts.cloud.databricks.com/api/2.0/accounts/&lt;account_id&gt;/workspaces If you don't see a JSON with a clean listing of workspaces, you are likely having a firewall issue that is blocking calls to the accounts console. Please have your infrastructure team add accounts.cloud.databricks.com to the allow-list. Ensure that the private IPv4 address from the NAT gateway is added to the IP allow list.  Offline Library Install - No PyPI Access If your workspace does not have access to PyPI, follow these steps to install the required libraries manually: Steps: Download the dbl_sat_sdk version specified in the notebook notebooks/utils/initialize from PyPi: https://pypi.org/project/dbl-sat-sdk/ Upload the dbl_sat_sdk-w.x.y-py3-none-any.whl to a dbfs location. You can use the databricks-cli as one mechanism to upload. For example: databricks --profile e2-satfs cp /localdrive/whlfile/dbl_sat_sdk-w.x.y-py3-none-any.whl dbfs:/FileStore/wheels/ Additionally, download the following wheel files and upload them to the dbfs location as above: https://github.com/databricks-industry-solutions/security-analysis-tool/tree/main/docs/wheels Upload all wheel files to /FileStore/wheels in your workspace. Verify all files are there by running: %fs ls /FileStore/wheels Then change the cell in your notebook install_sat_sdk to this: %pip install msal --find-links /Volumes/{catalog}/{schema}/{volume_name}/msal-1.22.0-py2.py3-none-any.whl %pip install dbl-sat-sdk==0.1.37 --find-links /Volumes/{catalog}/{schema}/{volume_name}/dbl_sat_sdk-0.1.37-py3-none-any.whl Make sure the versions for the above libraries match.   ","version":"Next","tagName":"h2"},{"title":"Overview","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/motivation/","content":"","keywords":"","version":"Next"},{"title":"Why Use SAT?‚Äã","type":1,"pageTitle":"Overview","url":"/security-analysis-tool/docs/motivation/#why-use-sat","content":" Databricks has worked with thousands of customers to securely deploy its platform, leveraging security features that meet diverse architectural requirements. While security implementations vary across organizations, there are commonly adopted guidelines and features used by organizations with high security standards.  SAT helps you:  üîç Identify Security Gaps Automatically scan your Databricks environment to find deviations from security best practices. üìä Prioritize Risks Get recommendations ranked by severity (High, Medium, Low) to focus on the most critical issues first. üìö Access Documentation Each recommendation includes direct links to relevant Databricks documentation for easy implementation. ‚úÖ Verify Compliance Ensure your configurations align with industry standards and organizational security policies.    ","version":"Next","tagName":"h2"},{"title":"What SAT Analyzes‚Äã","type":1,"pageTitle":"Overview","url":"/security-analysis-tool/docs/motivation/#what-sat-analyzes","content":" SAT performs comprehensive security checks across multiple dimensions:  üõ°Ô∏è Network Security - Firewall rules, IP access controls, VPC configurationsüë• Identity &amp; Access - Authentication, authorization, user managementüîê Data Protection - Encryption, data access controls, secrets management‚öñÔ∏è Governance - Audit logging, workspace settings, policies‚ÑπÔ∏è Informational - Configuration insights and recommendations  Each check identifies opportunities to harden your Databricks configurations, services, and resources, with clear explanations and remediation guidance.    ","version":"Next","tagName":"h2"},{"title":"Important Considerations‚Äã","type":1,"pageTitle":"Overview","url":"/security-analysis-tool/docs/motivation/#important-considerations","content":" Assessment Tool SAT is a productivity tool designed to help verify your security configurations against Databricks best practices. It is not intended to serve as a certification or formal attestation of your deployment's security posture.  ","version":"Next","tagName":"h2"},{"title":"Before Making Changes‚Äã","type":1,"pageTitle":"Overview","url":"/security-analysis-tool/docs/motivation/#before-making-changes","content":" Please review the SAT report with your:  ‚úì Business stakeholders‚úì System administrators‚úì Security team‚úì Compliance auditors  Key points to consider:  üìå Not all deviations require immediate mitigationüí∞ Some recommendations may have cost implicationsüîó Some security features may have dependency limitationsüìñ Always review the associated documentation before making changes  Additional Resources For more security guidance, visit the Databricks Security and Trust Center for comprehensive resources and best practices.    ","version":"Next","tagName":"h3"},{"title":"Project Updates & Support‚Äã","type":1,"pageTitle":"Overview","url":"/security-analysis-tool/docs/motivation/#project-updates--support","content":" ","version":"Next","tagName":"h2"},{"title":"Continuous Improvement‚Äã","type":1,"pageTitle":"Overview","url":"/security-analysis-tool/docs/motivation/#continuous-improvement","content":" The SAT project is regularly updated to:  ‚ú® Improve check accuracyüÜï Add new security checksüêõ Fix bugs and issuesüìà Enhance reporting features  ","version":"Next","tagName":"h3"},{"title":"Getting Help‚Äã","type":1,"pageTitle":"Overview","url":"/security-analysis-tool/docs/motivation/#getting-help","content":" üìß Feedback &amp; Questions Contact us at sat@databricks.com or open a GitHub issue üîÑ Updates Watch the GitHub repository for the latest releases    ","version":"Next","tagName":"h3"},{"title":"Project Support‚Äã","type":1,"pageTitle":"Overview","url":"/security-analysis-tool/docs/motivation/#project-support","content":" Community-Supported Project Important Support Information: ‚ö†Ô∏è This code is provided for exploration purposes only‚ö†Ô∏è Not formally supported by Databricks under any Service Level Agreements (SLAs)‚ö†Ô∏è Provided AS-IS, without warranties or guarantees‚ö†Ô∏è Do not submit support tickets to Databricks for issues with this project How to Get Help: üìù Submit bugs or issues as GitHub Issues‚è∞ Issues will be reviewed as time permitsü§ù Community contributions are welcome Licensing: üìÑ Source code is subject to the Databricks LICENSEüìö Third-party libraries are subject to their respective licenses ","version":"Next","tagName":"h2"},{"title":"Usage","type":0,"sectionRef":"#","url":"/security-analysis-tool/docs/usage/","content":"","keywords":"","version":"Next"},{"title":"Running the SAT Jobs and Pipelines‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#running-the-sat-jobs-and-pipelines","content":" Note: These jobs can take up to 10 minutes to run per workspace.  Within the Jobs and Pipelines pane, there should now be two jobs available: SAT Initializer Notebook and SAT Driver Notebook.  Run the SAT Initializer Notebook first. It only needs to complete successfully once, though it can be re-run if needed.Once the initializer completes, run the SAT Driver Notebook, which can be executed on a recurring basis. By default, it is scheduled to run every Monday, Wednesday, and Friday.Optionally, run the SAT Secrets Scanner Notebook to scan workspace notebooks for exposed secrets using TruffleHog. This can be run on-demand or scheduled separately based on your security requirements.  Once the Jobs and Pipelines have finished running, you should see the schema under the catalog that was set at the time of installation for SAT within the Catalog pane.    ","version":"Next","tagName":"h2"},{"title":"Accessing and Viewing the SAT Dashboards‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#accessing-and-viewing-the-sat-dashboards","content":" SAT provides multiple dashboards to suit different audiences and use cases:  Main SAT Dashboard - [SAT] Security Analysis Tool - Assessment Results A comprehensive dashboard with detailed security findings across all categories. Executive Dashboard A streamlined, high-level view designed for stakeholders and executives who need a quick overview of the security posture. Secret Scanner Dashboard A specialized dashboard that detects and reports exposed credentials (API keys, tokens, passwords) across your Databricks notebooks.  Databricks One Integration You can use Databricks One to access and share the SAT dashboards across your organization, making it easier to distribute security insights to stakeholders.  ","version":"Next","tagName":"h2"},{"title":"Dashboard Configuration‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#dashboard-configuration","content":" The dashboards are, by default, owned by the user profile or Service Principal used during SAT setup. If you encounter errors when running the dashboard, they are most likely due to permissions issues. To update this behavior:  Click on the dashboard and in the top right, click on the &quot;Share&quot; button.Click on the cogwheel icon and select &quot;Assign new owner&quot;. Choose the new owner of the dashboard. Ownership can also be assigned to someone with access to the SAT catalog/schema and the underlying tables.Click on the &quot;Published&quot; icon next to the name of the dashboard towards the top of the page, and switch to the &quot;Draft&quot; version. Click on the &quot;Publish&quot; button that is next to the &quot;Share&quot; button. Choose from one of the two credential options: Embed credentials (default): All viewers run queries using the owner's credentials and compute. This may expose data to users who wouldn't normally have access. Don't embed credentials: Each viewer must have access to the workspace and associated data to view the dashboard. We recommend using this option for more secure access control. The dashboard can be shared with other team members by clicking the &quot;Share&quot; button from the &quot;Published&quot; mode. This is what the SAT dashboard should look like:    ","version":"Next","tagName":"h3"},{"title":"Activating Alerts‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#activating-alerts","content":" Navigate to the Alerts from the left-hand pane under the SQL section. Click on All Alerts to view all of the alerts created by the SAT jobs.    Click on one of the alerts to see the details.    Click on the &quot;Add Schedules&quot; button. From the &quot;Settings&quot; tab, you can define the schedule for the alert to be triggered.    Next, click on the &quot;Destinations&quot; tab. From here, you can search for a user (email) or a destination object for the alert to be sent to. Click on &quot;Create&quot; to save the schedule with the selected recipient(s) for the alert.    ","version":"Next","tagName":"h2"},{"title":"Updating Configuration Files (Optional)‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#updating-configuration-files-optional","content":" ","version":"Next","tagName":"h2"},{"title":"Modifying Security Best Practices‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#modifying-security-best-practices","content":" Navigate to Workspace -&gt; Applications -&gt; SAT -&gt; files -&gt; notebooks -&gt; Setup -&gt; 7. update_sat_check_configuration.  Use this utility to:  Enable or disable individual checksModify the evaluation valueUpdate the alert configuration for each check  Configure widget settings on &quot;Widget Change&quot; for this notebook to &quot;Do Nothing&quot;.    ","version":"Next","tagName":"h3"},{"title":"Modifying Workspace Configuration File‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#modifying-workspace-configuration-file","content":" Required for manual checks values  Navigate to Workspace -&gt; Applications -&gt; SAT -&gt; files -&gt; notebooks -&gt; Setup -&gt; 8. update_workspace_configuration.  Use this utility to:  Enable analysis for a specific workspace by setting analysis_enabled to True, or disable it by setting it to False.Turn on a specific workspace while turning off others for a focused run.Apply your configuration changes to multiple workspaces using the &quot;Apply Setting to All Workspaces&quot; option.  Configure widget settings on &quot;Widget Change&quot; for this notebook to &quot;Do Nothing&quot;.  Update manual check values for each workspace:  sso_enabled: Set to True if Single Sign-On (SSO) is enabled for the workspace.scim_enabled: Set to True if SCIM integration is configured for user and group provisioning.vpc_peering_done: Set to False if the workspace is not peered with another VPC.object_storage_encrypted: Set to True if your object storage buckets are encrypted.table_access_control_enabled: Set to True if Table Access Control (ACLs) is enabled to enforce user isolation on clusters.  These settings are critical for running manual checks and ensuring accurate SAT analysis results.    ","version":"Next","tagName":"h3"},{"title":"Configuring Secret Scanning (Optional)‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#configuring-secret-scanning-optional","content":" The SAT Secrets Scanner uses TruffleHog to detect exposed secrets in Databricks workspace notebooks. This includes detection of:  Databricks-specific tokens (DKEA, DAPI, DOSE)AWS, Azure, and GCP cloud credentialsAPI tokens and keys (GitHub, Slack, Stripe, etc.)Private keys and other sensitive credentials  ","version":"Next","tagName":"h2"},{"title":"Configuration‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#configuration","content":" Secret scanning behavior can be configured via the trufflehog_detectors.yaml file located in the configs folder:  days_back: Controls how far back to search for modified notebooks Set to 1 to scan notebooks modified in the last day (default)Set to 7 to scan notebooks modified in the last weekSet to 0 to scan ALL notebooks in the workspace (no time filter) page_size: Number of notebooks to process per API page (default: 50)custom detectors: Add custom regex patterns to detect organization-specific secret formats  ","version":"Next","tagName":"h3"},{"title":"Firewall Allowlist Requirements‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#firewall-allowlist-requirements","content":" If your environment uses firewalls, you may need to allowlist the following GitHub domains to ensure secret scanning can download TruffleHog and access required resources:  Add the following URLs to your firewall allowlist:  raw.githubusercontent.comgithub.comtoken.actions.githubusercontent.comrelease-assets.githubusercontent.com  ","version":"Next","tagName":"h3"},{"title":"Viewing Secret Scan Results‚Äã","type":1,"pageTitle":"Usage","url":"/security-analysis-tool/docs/usage/#viewing-secret-scan-results","content":" Secret scan results are stored in the notebooks_secret_scan_results and clusters_secret_scan_results tables within your SAT schema and available to review via SAT Dashboard. ","version":"Next","tagName":"h3"}],"options":{"id":"default"}}