---
sidebar_position: 1
---
import useBaseUrl from '@docusaurus/useBaseUrl';
import Admonition from '@theme/Admonition';
import AccordionItem from '@site/src/components/AccordionItem';

# AWS Installation

This guide will walk you through setting up the **Security Analysis Tool (SAT)** on AWS Databricks.

<Admonition type="warning" title="Unity Catalog Required">
**SAT v0.5.0 and higher requires Unity Catalog.** Make sure Unity Catalog is enabled in your Databricks environment before installing SAT.
</Admonition>

<Admonition type="info" title="AWS GovCloud Support">
SAT is compatible with **AWS GovCloud** for the Civilian Shard. To install and run SAT on AWS GovCloud, please use classic compute resources.

**Note:** DoD Shard compatibility will be coming soon.
</Admonition>

<Admonition type="tip" title="Best for Premium & Enterprise Tiers">
SAT is especially beneficial to customers on Databricks **Premium** or **Enterprise** tiers, as most checks and recommendations involve security features only available in these tiers.
</Admonition>

## Prerequisites

Before you begin, ensure you have:

- âœ… Reviewed the [general prerequisites](../../installation/index.mdx#prerequisites)
- âœ… Appropriate permissions in your Databricks Account Console
- âœ… A metastore attached to your installation workspace
- âœ… Databricks CLI installed and configured
- âœ… **Python version lower than 3.12** (for local installation using install.sh)

---

## Step 1: Create Service Principal

The Service Principal allows SAT to authenticate with your Databricks workspaces and collect security information.

<AccordionItem question="How to create a Service Principal">

**Follow these steps in the Databricks Account Console:**

1. Navigate to the [Account Console](https://accounts.cloud.databricks.com)
2. Click on `User management` in the left sidebar
3. Select `Service Principal` â†’ `Add service principal`
4. Enter a name for the service principal (e.g., "SAT-Service-Principal")
5. Grant the `Account Admin` role
6. Assign the `Workspace Admin` role for each workspace to be monitored
7. Add to the `Metastore Admin` group or role
8. Create a new OAuth Secret
9. **Save the `Secret` and `Client ID`** (you'll need these later)
10. Add the Service Principal to each workspace you want to analyze

<div className='bg-gray-100 p-4 rounded-lg mb-6'>
  <img src={useBaseUrl('/img/aws_ws.png')} alt="Service Principal Setup" />
</div>

**Required Permissions:**
- [Account Admin role](https://docs.databricks.com/aws/en/admin/users-groups/service-principals)
- [Workspace Admin role](https://docs.databricks.com/aws/en/admin/users-groups/service-principals) for **each workspace**
- [Metastore admin group](https://docs.databricks.com/aws/en/data-governance/unity-catalog/manage-privileges/admin-privileges) membership

</AccordionItem>  

---

## Step 2: Run Installation

<Admonition type="note" title="Credentials Required">
Have these credentials ready before starting:

- ðŸ”‘ **Databricks Account ID**
- ðŸ”‘ **Databricks Service Principal ID** (Client ID from Step 1)
- ðŸ”‘ **Databricks Service Principal Secret** (from Step 1)
</Admonition>

### Installation Steps

Run these commands on your workstation or a VM with internet access and Databricks workspace connectivity:

**1. Clone the SAT repository:**

```sh
git clone https://github.com/databricks-industry-solutions/security-analysis-tool.git
cd security-analysis-tool
```

<Admonition type="warning" title="Databricks CLI Required">
Make sure the target workspace has a [profile configured](https://docs.databricks.com/aws/en/dev-tools/cli/profiles) in the [Databricks CLI](https://docs.databricks.com/aws/en/dev-tools/cli/tutorial).
</Admonition>

**2. Make the installation script executable and run it:**

```sh
chmod +x install.sh
./install.sh
```

<Admonition type="tip" title="Proxy Support">
**Proxies are supported!** You can add your HTTP and HTTPS proxy values during the install.sh script when prompted.
</Admonition>

**3. Follow the interactive prompts:**

The installation script will guide you through the setup process. Here's what it looks like:

<div className='bg-gray-100 p-4 rounded-lg mb-6'>
  <img src={useBaseUrl('/gif/terminal-aws.gif')} alt="Installation Process" />
</div>

---

## Next Steps

Congratulations! You've successfully installed SAT on AWS Databricks.

<Admonition type="success" title="Installation Complete">
SAT is now ready to analyze your Databricks workspaces. Click [here](../../../functionality) for a detailed guide on how to run and use it.
</Admonition>

---

## Need Help?

<AccordionItem question="Troubleshooting Installation Issues">

If you encounter problems during installation:

**Common Issues:**
- âœ“ Double-check your credentials are correct
- âœ“ Verify you have the required permissions in your Databricks environment
- âœ“ Ensure the Service Principal has been added to all workspaces
- âœ“ Confirm the metastore is attached to your workspace

**Resources:**
- Review our [FAQ page](../../faq.mdx) for common questions
- Use the [diagnostic notebook](../../troubleshooting.mdx) to verify your setup
- Check the [troubleshooting guide](../../troubleshooting.mdx) for specific errors

**Still need help?** Contact us at sat@databricks.com

</AccordionItem>